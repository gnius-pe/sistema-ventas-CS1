
<!-- app/views/sales/factura.html.erb -->
<h1>Factura de Venta</h1>

<div>
  <% @sales.each do |sale| %>
    <p>Venta ID: <%= sale.id %></p>
    <p><strong>Nombre del Cliente:</strong> <%= sale.customer_name %></p>
    <p><strong>Fecha de Venta:</strong> <%= sale.sale_date%></p>
    <!-- Asumiendo que tu modelo Tiend tiene un atributo 'name' -->

    <h2>Productos Vendidos:</h2>
    <table>
      <thead>
        <tr>
          <th>Producto</th>
          <th>Cantidad</th>
          <th>Precio Unitario</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody>
        <% sale.sale_items.each do |item| %>
          <%# Debugging para verificar que los sale_items se estÃ¡n cargando correctamente %>
          <%= debug item %>
          <tr>
            <td><%= item.product.nombre %></td>
            <td><%= item.quantity %></td>
            <td>$<%= item.price %></td>
            <td>$<%= item.quantity * item.price %></td>
          </tr>
        <% end %>
      </tbody>
    </table>

    <p><strong>Total de la Venta:</strong> $<%= sale.total %></p>
    <h1>---------------------------------------------</h1>
  <% end %>
  
</div>

<%= link_to 'Volver', sales_path %>
